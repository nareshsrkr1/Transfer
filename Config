#!/bin/bash

count=0
for dir in /data/*; do
    if [ "$count" -ge 10 ]; then
        break
    fi
    parent_size=$(du -sh "$dir" 2>/dev/null | awk '{print $1}')
    parent_size_numeric=$(echo "$parent_size" | sed 's/G//')
    if [[ "$parent_size_numeric" -ge 10 ]]; then
        (
            du_output=$(du -sh "$dir"/* 2>/dev/null)
            size=$(echo "$du_output" | awk '{print $1}')
            if [[ "$size" =~ G && "${size/G/}" -gt 10 ]]; then
                echo "$dir: $size"
                ((count++))
            fi
        ) &
    fi
done
wait
